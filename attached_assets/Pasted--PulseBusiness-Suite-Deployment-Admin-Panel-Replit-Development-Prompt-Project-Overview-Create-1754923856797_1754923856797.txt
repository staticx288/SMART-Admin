# PulseBusiness Suite Deployment Admin Panel - Replit Development Prompt

## Project Overview
Create a modern, responsive deployment admin dashboard for the PulseBusiness Suite that allows you to load, configure, and deploy your already-built Pulse modules to connected nodes. This is NOT a development platform - it's a deployment orchestrator for existing modules.

**CRITICAL FUNCTION**: This panel LOADS and DEPLOYS existing Pulse modules, it doesn't create them. You point the dashboard to where your modules are located, and it handles the deployment to your connected nodes.

## Core Requirements

### 1. Technology Stack
- **Backend**: Python FastAPI (RESTful API)
- **Frontend**: TypeScript + Vite + React/Vue (your preference)
- **Styling**: Tailwind CSS with component library (shadcn/ui recommended)
- **Database**: Drizzle ORM with SQLite (easily upgradeable to PostgreSQL)
- **Icons**: Lucide React or Heroicons
- **Build Tool**: Vite for fast development and hot reload

### 2. Module Loading Architecture
The system should allow you to:
- **Point to module locations**: File paths, Git repos, Docker containers
- **Load module definitions**: Read module configs from your existing builds
- **Deploy to nodes**: Push modules to connected Raspberry Pi/server nodes
- **Manage deployments**: Start, stop, restart, update modules on nodes

### 3. Your Existing Modules to Load

You already have these built and just need to deploy them:
- **AI Modules**: Your existing AI implementations with Llama models
- **PulseLedger**: Your blockchain-based record keeping system
- **PulseAudit**: Your audit trails and compliance system
- **PulseID**: Your quantum-biological identity system
- **PulseQuery**: Your voice-activated knowledge interface
- **PulseCompliance**: Your regulatory management system
- **PulseSecurity**: Your security monitoring system
- **Any other modules** you've built

## File Structure Required

```
pulsebusiness_deployment/
├── backend/                        # Python FastAPI backend
│   ├── app/
│   │   ├── __init__.py
│   │   ├── main.py                # FastAPI application
│   │   ├── config.py              # Configuration management
│   │   ├── database.py            # Drizzle database connection
│   │   ├── models/                # Pydantic models
│   │   ├── routers/               # API route handlers
│   │   ├── services/              # Business logic
│   │   │   ├── module_loader.py   # Load modules from paths
│   │   │   ├── node_manager.py    # Manage connected nodes
│   │   │   └── deployment_manager.py # Handle deployments
│   │   └── utils/
│   ├── requirements.txt           # Python dependencies
│   ├── alembic/                   # Database migrations
│   └── tests/
├── frontend/                       # TypeScript + Vite frontend
│   ├── src/
│   │   ├── main.tsx               # App entry point
│   │   ├── App.tsx                # Main app component
│   │   ├── components/            # Reusable components
│   │   │   ├── ui/                # shadcn/ui components
│   │   │   ├── modules/           # Module-related components
│   │   │   ├── nodes/             # Node management components
│   │   │   └── deployment/        # Deployment components
│   │   ├── pages/                 # Page components
│   │   │   ├── Dashboard.tsx      # Main deployment dashboard
│   │   │   ├── ModuleLoader.tsx   # Module loading interface
│   │   │   ├── NodeManagement.tsx # Node management
│   │   │   └── DeploymentStatus.tsx # Deployment monitoring
│   │   ├── hooks/                 # Custom React hooks
│   │   ├── lib/                   # Utilities and API client
│   │   ├── types/                 # TypeScript type definitions
│   │   └── styles/                # Global styles (minimal with Tailwind)
│   ├── package.json
│   ├── tsconfig.json
│   ├── tailwind.config.js
│   ├── vite.config.ts
│   └── drizzle.config.ts
├── shared/                         # Shared types and schemas
│   └── types.ts                   # Shared TypeScript types
└── docker-compose.yml             # Optional containerization
```

## Key Features to Implement

### 1. Module Loading Dashboard
- **Module Discovery**: Scan specified paths for your existing modules
- **Module Registration**: Load module definitions and configurations
- **Module Validation**: Verify module integrity before deployment
- **Module Library**: Show all discovered modules with metadata

### 2. Node Management
- **Node Discovery**: Find connected Raspberry Pi and server nodes
- **Node Status**: Real-time status of all connected nodes
- **Node Configuration**: Configure deployment targets per node
- **Resource Monitoring**: CPU, RAM, disk space per node

### 3. Deployment Orchestration
- **Deploy Modules**: Push selected modules to target nodes
- **Start/Stop Services**: Control running modules on nodes
- **Update Deployments**: Push updates to deployed modules
- **Rollback**: Revert to previous module versions

### 4. Configuration Templates

#### Module Path Configuration
```json
{
  "module_paths": {
    "ai_modules": "/path/to/your/ai/modules",
    "pulse_ledger": "/path/to/pulse_ledger",
    "pulse_audit": "/path/to/pulse_audit", 
    "pulse_id": "/path/to/pulse_id",
    "pulse_query": "/path/to/pulse_query",
    "pulse_compliance": "/path/to/pulse_compliance",
    "pulse_security": "/path/to/pulse_security",
    "custom_modules": "/path/to/custom/modules"
  },
  "module_types": {
    "git_repos": ["git@github.com:yourrepo/module.git"],
    "local_paths": ["/local/path/to/module"],
    "docker_images": ["your-registry/module:latest"]
  }
}
```

## Additional Configuration Files Needed

### Frontend Package.json
```json
{
  "name": "pulsebusiness-admin",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.8.0",
    "drizzle-orm": "^0.29.0",
    "@tanstack/react-query": "^5.0.0",
    "axios": "^1.6.0",
    "lucide-react": "^0.300.0",
    "clsx": "^2.0.0",
    "tailwind-merge": "^2.0.0"
  },
  "devDependencies": {
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "@vitejs/plugin-react": "^4.0.0",
    "autoprefixer": "^10.4.16",
    "eslint": "^8.45.0",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.3",
    "postcss": "^8.4.32",
    "tailwindcss": "^3.3.6",
    "typescript": "^5.0.2",
    "vite": "^5.0.0",
    "drizzle-kit": "^0.20.0"
  }
}
```

### Tailwind Config
```js
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        pulse: {
          50: '#f0f9ff',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
          900: '#1e3a8a',
        }
      }
    },
  },
  plugins: [],
}
```

### Vite Config
```ts
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "./src"),
    },
  },
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8000',
        changeOrigin: true,
      }
    }
  }
})
```

### Backend Requirements.txt
```txt
fastapi==0.104.1
uvicorn[standard]==0.24.0
pydantic==2.5.0
drizzle-orm==0.29.0
python-multipart==0.0.6
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
aiofiles==23.2.1
asyncpg==0.29.0
alembic==1.13.0
```

### Drizzle Schema Example
```ts
// shared/schema.ts
import { sqliteTable, text, integer, blob } from 'drizzle-orm/sqlite-core';

export const nodes = sqliteTable('nodes', {
  id: text('id').primaryKey(),
  name: text('name').notNull(),
  type: text('type').notNull(), // 'raspberry_pi' | 'ai_server' | 'edge_device'
  ipAddress: text('ip_address').notNull(),
  sshPort: integer('ssh_port').default(22),
  capabilities: text('capabilities'), // JSON string
  resources: text('resources'), // JSON string
  status: text('status').notNull().default('offline'),
  lastSeen: integer('last_seen'),
  createdAt: integer('created_at'),
  updatedAt: integer('updated_at')
});

export const modules = sqliteTable('modules', {
  id: text('id').primaryKey(),
  name: text('name').notNull(),
  version: text('version'),
  path: text('path').notNull(),
  type: text('type').notNull(), // 'ai' | 'core' | 'system'
  description: text('description'),
  configuration: text('configuration'), // JSON string
  status: text('status').default('discovered'),
  createdAt: integer('created_at'),
  updatedAt: integer('updated_at')
});

export const deployments = sqliteTable('deployments', {
  id: text('id').primaryKey(),
  moduleId: text('module_id').references(() => modules.id),
  nodeId: text('node_id').references(() => nodes.id),
  status: text('status').notNull(), // 'deploying' | 'deployed' | 'failed' | 'stopped'
  configuration: text('configuration'), // JSON string
  deployedAt: integer('deployed_at'),
  createdAt: integer('created_at'),
  updatedAt: integer('updated_at')
});
```

## TypeScript Types and Interfaces

### Frontend Types (src/types/index.ts)
```typescript
export interface Node {
  id: string;
  name: string;
  type: 'raspberry_pi' | 'ai_server' | 'edge_device';
  ipAddress: string;
  sshPort: number;
  capabilities: string[];
  resources: {
    cpuCores: number;
    ramGb: number;
    storageGb: number;
  };
  status: 'online' | 'offline' | 'error';
  lastSeen?: number;
  createdAt: number;
  updatedAt: number;
}

export interface Module {
  id: string;
  name: string;
  version?: string;
  path: string;
  type: 'ai' | 'core' | 'system';
  description?: string;
  configuration?: Record<string, any>;
  status: 'discovered' | 'loaded' | 'error';
  createdAt: number;
  updatedAt: number;
}

export interface Deployment {
  id: string;
  moduleId: string;
  nodeId: string;
  status: 'deploying' | 'deployed' | 'failed' | 'stopped';
  configuration?: Record<string, any>;
  deployedAt?: number;
  createdAt: number;
  updatedAt: number;
  module?: Module;
  node?: Node;
}

export interface DeploymentRequest {
  moduleId: string;
  nodeIds: string[];
  configuration?: Record<string, any>;
}

export interface SystemStatus {
  totalNodes: number;
  onlineNodes: number;
  totalModules: number;
  activeDeployments: number;
  systemHealth: 'healthy' | 'degraded' | 'critical';
}
```

### API Client (src/lib/api.ts)
```typescript
import axios from 'axios';
import type { Node, Module, Deployment, DeploymentRequest, SystemStatus } from '@/types';

const api = axios.create({
  baseURL: '/api',
  timeout: 10000,
});

export const apiClient = {
  // Nodes
  getNodes: () => api.get<Node[]>('/nodes'),
  getNode: (id: string) => api.get<Node>(`/nodes/${id}`),
  testNode: (id: string) => api.post(`/nodes/${id}/test`),
  
  // Modules
  scanModules: () => api.post('/modules/scan'),
  getModules: () => api.get<Module[]>('/modules/available'),
  loadModule: (name: string) => api.post(`/modules/load/${name}`),
  
  // Deployments
  deploy: (request: DeploymentRequest) => api.post<Deployment>('/deploy', request),
  getDeployments: () => api.get<Deployment[]>('/deployments'),
  getDeployment: (id: string) => api.get<Deployment>(`/deployments/${id}`),
  startDeployment: (id: string) => api.post(`/deployments/${id}/start`),
  stopDeployment: (id: string) => api.post(`/deployments/${id}/stop`),
  restartDeployment: (id: string) => api.post(`/deployments/${id}/restart`),
  deleteDeployment: (id: string) => api.delete(`/deployments/${id}`),
  
  // System
  getSystemStatus: () => api.get<SystemStatus>('/status/overview'),
};
```

### 5. Deployment Interface
- **Module Selection**: Choose which of your built modules to deploy
- **Target Selection**: Select which nodes to deploy to
- **Configuration Override**: Adjust module settings for deployment
- **Deployment Monitoring**: Real-time deployment progress and logs

### 6. Real-Time Status Dashboard
- **Node Health**: Live status of all connected nodes
- **Module Status**: Running status of deployed modules
- **Resource Usage**: CPU, RAM, disk usage across nodes
- **Deployment Logs**: Real-time logs from deployments

## API Endpoints Needed

```
# Module Loading
GET /api/modules/scan - Scan for modules at configured paths
GET /api/modules/available - List all discovered modules
POST /api/modules/load/{module_name} - Load specific module definition

# Node Management  
GET /api/nodes - List all connected nodes
GET /api/nodes/{node_id}/status - Get node status
POST /api/nodes/{node_id}/test - Test node connectivity

# Deployment Management
POST /api/deploy - Deploy module to nodes
GET /api/deployments - List all deployments
GET /api/deployments/{deployment_id}/status - Get deployment status
POST /api/deployments/{deployment_id}/start - Start deployed module
POST /api/deployments/{deployment_id}/stop - Stop deployed module
POST /api/deployments/{deployment_id}/restart - Restart deployed module
DELETE /api/deployments/{deployment_id} - Remove deployment

# System Status
GET /api/status/overview - Overall system status
GET /api/status/nodes - All nodes status
GET /api/status/deployments - All deployments status
```

## User Interface Requirements

### 1. Module Loading Interface
- **Path Configuration**: Set paths to your existing modules
- **Module Scanner**: Scan and discover available modules
- **Module Validator**: Check module integrity and dependencies
- **Module Library**: Browse discovered modules with metadata

### 2. Node Management Interface  
- **Node Discovery**: Auto-discover connected nodes
- **Node Dashboard**: Visual status of all nodes
- **Node Configuration**: Configure node capabilities and resources
- **Node Testing**: Test connectivity and health

### 3. Deployment Interface
- **Drag-and-Drop Deployment**: Drag modules to target nodes
- **Deployment Wizard**: Step-by-step deployment configuration
- **Batch Deployment**: Deploy multiple modules at once
- **Deployment History**: Track all deployments over time

### 4. Monitoring Dashboard
- **Real-Time Status**: Live updates of node and module status  
- **Resource Graphs**: CPU, RAM, disk usage over time
- **Alert System**: Notifications for deployment issues
- **Log Viewer**: Real-time deployment and module logs

## Implementation Focus Areas

### 1. Module Discovery System
- Scan local file systems for your existing modules
- Parse module configuration files to understand capabilities
- Validate module structure and requirements
- Cache module metadata for quick access

### 2. Node Communication
- SSH-based communication with Raspberry Pi nodes
- Docker deployment for containerized modules
- Systemd service management for module lifecycle
- File transfer for module deployment

### 3. Deployment Engine
- Template-based deployment configurations
- Rolling deployments with health checks
- Rollback capabilities for failed deployments
- Configuration management across nodes

### 4. Status Monitoring
- Real-time node health monitoring
- Module status tracking
- Resource usage monitoring
- Log aggregation from deployed modules

## Getting Started Instructions
1. **Set up the project structure** with separate backend and frontend folders
2. **Initialize the FastAPI backend** with Drizzle ORM and database setup
3. **Initialize the Vite frontend** with TypeScript, React, and Tailwind CSS
4. **Set up the database schema** using Drizzle with your node, module, and deployment tables
5. **Implement the API endpoints** for module loading, node management, and deployments
6. **Build the React components** with Tailwind styling and TypeScript interfaces
7. **Add real-time updates** using React Query or WebSockets for live status
8. **Implement the drag-and-drop deployment interface** with proper TypeScript typing
9. **Add error handling and loading states** throughout the application
10. **Test with your existing Pulse modules** and deployment targets
11. **Set up development and production builds** with proper environment configs
12. **Document the deployment procedures** for your team

## Success Criteria
- ✅ Can discover and load your existing Pulse modules
- ✅ Can connect to and manage Raspberry Pi and server nodes
- ✅ Can deploy modules to selected nodes with configuration
- ✅ Can start, stop, restart, and update deployed modules
- ✅ Provides real-time status of nodes and deployments
- ✅ Handles deployment failures gracefully with rollback
- ✅ Scales to manage multiple nodes and modules simultaneously
- ✅ Maintains deployment history and audit trails

This deployment admin panel should serve as your central command center for managing your existing PulseBusiness Suite modules across your infrastructure, making it easy to deploy, monitor, and manage your already-built systems.